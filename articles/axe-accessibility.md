---
title: axeã‚’æ´»ç”¨ã—ã¦ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’ã¡ã‚ƒã‚“ã¨ç†è§£ã—ãªãã¦ã‚‚ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’æ‹…ä¿ã—ãŸhtmlã‚’æ›¸ã
emoji: 'ğŸ“š'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['Jest', 'hygen', 'Playwright', 'axe', 'Accessibility']
published: true
---

ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«ã¯ã‚ã¾ã‚Šè©³ã—ããªã„ã®ã§ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ä¸Šå•é¡ŒãŒã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã—ã¾ã£ã¦ã‚‚æ°—ã¥ãã“ã¨ãŒã“ã‚Œã¾ã§ã§ãã¾ã›ã‚“ã§ã—ãŸãŒã€axe ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’ã‚ã‚‹ç¨‹åº¦æ‹…ä¿ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã¦ã„ã‚‹ã‹ãƒ†ã‚¹ãƒˆã‚’ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

`jest-axe` ãƒ» `@axe-core/playwright` ã‚’ä½¿ç”¨ã—ãŸãƒ†ã‚¹ãƒˆã‚’ CI ã§å›ã™ã“ã¨ã§ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’ç¶™ç¶šçš„ã«æ‹…ä¿ã—ã¦ã„ãã“ã¨ãŒã§ãã¾ã™ã€‚

## Jest axeã‚’æ´»ç”¨ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£æ‹…ä¿

`jest-axe`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã®ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ã“ã¨ã§ã€1 ã¤ 1 ã¤ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£çš„ã«æ­£ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹ã“ã¨ãŒã§ãã€å°ã•ã„å˜ä½ã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®æ”¹å–„ã‚’ã—ã¦ã„ãã“ã¨ãŒã§ãã‚‹ã®ã§æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚‚å°å…¥ãŒã—ã‚„ã™ã„ã§ã™ã€‚

## jest-axe ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ã¾ãš `jest.setup.js` ã« axe ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ã—ã¾ã™ã€‚

```typescript
import { toHaveNoViolations } from 'jest-axe'
import 'jest-axe/extend-expect'

expect.extend(toHaveNoViolations)
```

æ¬¡ã« axe ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã€ãƒ©ãƒƒãƒ‘ãƒ¼ã®é–¢æ•°ã‚’ç”¨æ„ã—ã¦å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
è‡ªåˆ†ã¯ã“ã¡ã‚‰ã®ã‚ˆã†ã« axe ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ç”¨æ„ã—ã¦ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ã€ç‰¹ã«é™¤å¤–ã®è¨­å®šã‚’ã—ã¦ã„ãªã„ã§ã™ãŒã€å°å…¥ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯æ‹…ä¿ã™ã‚‹ã“ã¨ãŒé›£ã—ã„ãƒ«ãƒ¼ãƒ«ã‚’åŸºæœ¬é™¤å¤–ã«ã—ã¦ã„ã¾ã™ã€‚

https://github.com/YasushiKobayashi/samples/blob/main/src/next-sample/src/testUtils/axeRunner.ts

```typescript
import { configureAxe } from 'jest-axe'

export const axeRunner = configureAxe({
  rules: {
    'image-alt': { enabled: false },
    'link-name': { enabled: false },
  },
})
```

https://github.com/YasushiKobayashi/samples/blob/main/src/next-sample/src/templates/Top/Top.spec.tsx#L22

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹ã§ä¸è¦ãªã‚‚ã®ã¯éƒ½åº¦é™¤å¤–

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½ã§ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹å ´åˆã©ã†ã—ã¦ã‚‚ã€input ã‚¿ã‚°ã ã‘ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãªã®ã« label ãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã‚‚ã©ã†ã—ã‚ˆã†ã‚‚ãªã„ã¨ã„ã†ã“ã¨ãŒã‚ã‚‹ã®ã§ã€ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ã“ã®ãƒ«ãƒ¼ãƒ«ã‚’é™¤å¤–ã—ãŸã„ã¨ã„ã†ã“ã¨ãŒã‚ã£ãŸå ´åˆã¯ã€éƒ½åº¦é™¤å¤–ã™ã‚‹ã“ã¨ã§ãƒ†ã‚¹ãƒˆã‚’é€šã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€ã™ã¹ã¦ã®ãƒ«ãƒ¼ãƒ«ã«ã¡ã‚ƒã‚“ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã‚ã‚Šã€ä»Šå®ˆã‚ŠãŸã„ãƒ«ãƒ¼ãƒ«ãªã®ã‹è€ƒãˆãªãŒã‚‰å°å…¥ã—ã¦ã„ãã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

ä¸‹è¨˜ã®ã‚ˆã†ã«åŸºæœ¬çš„ã«ã¯æ—¥æœ¬èªè¨³ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ãƒ«ãƒ¼ãƒ«ã‚‚å¤šã„ã§ã™ã€‚

https://dequeuniversity.com/rules/axe/4.4/label?lang=ja

## hygenã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆãƒ•ãƒ­ãƒ¼ã«çµ„è¾¼ã‚€

ä¸‹è¨˜ã®è¨˜äº‹ã§ã‚‚æ›¸ã„ãŸã‚ˆã†ã«ã€æœ€è¿‘ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ™‚ã¯ hygen ã‚’ä½¿ç”¨ã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å…ƒã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¾ã§ä½œæˆã—ã¦ã„ã‚‹ã®ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§å¿…ãš axe ã®ãƒ†ã‚¹ãƒˆã‚’ã™ã‚‹ã‚ˆã†ã«ä»•çµ„ã¿ã¥ãã‚ŠãŒã§ãã¦ã„ã¾ã™ã€‚

https://zenn.dev/ptpadan/articles/hygen-storybook-jest

## Playwright axeã§E2Eãƒ†ã‚¹ãƒˆã§ã‚‚ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã™ã‚‹

`@axe-core/playwright` ã‚’ä½¿ã†ã“ã¨ã§ã€end-to-end ãƒ†ã‚¹ãƒˆã®ä¸­ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆãŒã§ãã¾ã™ã€‚

å…¨ã¦ã«å¯¾å¿œã—ã‚ˆã†ã¨ã™ã‚‹ã¨é›£ã—ã„ã‚‚ã®ã‚‚å¤šã„ã®ã§å¯¾å¿œã§ãã¦ãªã„ãƒ«ãƒ¼ãƒ«ã‚‚å¤šã„ã®ã§ã™ãŒã€1 ã¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã ã‘ã§ã¯æ¤œå‡ºã§ãã‚‹ã§ããªã„ã‚¨ãƒ©ãƒ¼ã‚’ç™ºè¦‹ã§ãã€ä¾‹ãˆã°ã“ã®ã‚ˆã†ã« h1 ã‚¿ã‚°ã«é–¢ã™ã‚‹ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ãã‚Œã¾ã™ã€‚

```typescript
{
    id: 'page-has-heading-one',
    impact: 'moderate',
    tags: [ 'cat.semantics', 'best-practice' ],
    description: 'Ensure that the page, or at least one of its frames contains a level-one heading',
    help: 'Page should contain a level-one heading',
    helpUrl: 'https://dequeuniversity.com/rules/axe/4.4/page-has-heading-one?application=playwright',
    nodes: [ [Object] ]
},
```

### Playwright axeã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Playwright axe ã§ã‚‚åŒæ§˜ã« axe ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ç”¨æ„ã—ã€éƒ½åº¦ãƒšãƒ¼ã‚¸ã®çŠ¶æ…‹ãŒå¤‰ã‚ã‚‹ãŸã³ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

å®Œå…¨ãªé‹ç”¨ã¯é›£ã—ãã†ãªã®ã§ã€ã‚¨ãƒ©ãƒ¼ãŒè¦‹ã¤ã‹ã£ãŸéš›ã«ãƒ†ã‚¹ãƒˆã‚’è½ã¨ã™é‹ç”¨ã¯ã¾ã ã—ã¦ã„ãªã„ã§ã™ã€‚

```typescript
import AxeBuilder from '@axe-core/playwright'

export const axeRunner = async (page: Page, disableRules: string[] = []) => {
  const results = await new AxeBuilder({ page })
    .disableRules(['image-alt', 'color-contrast', 'meta-viewport', 'link-name', ...disableRules])
    .analyze()

  if (results.violations.length > 0) {
    const title = await page.title()
    const url = page.url()
    console.error(title, url, results.violations)
    // test.fail()
  }
}
```

Playwright ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚„ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚Playwright ãŒå®Ÿè¡Œã§ãã¦ã„ã‚Œã°ã™ãã«ä¸Šè¨˜ã®ã‚ˆã†ãªæ–¹æ³•ã§ãƒ†ã‚¹ãƒˆå¯èƒ½ã§ã™ã€‚

https://zenn.dev/ptpadan/articles/playwright-e2e

ä»Šå›ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã«ã—ãŸå†…å®¹ã‚„ã€å‹•ä½œç¢ºèªã§ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰ã¯å…¨ã¦ã“ã¡ã‚‰ã® PR ã§ä½œæˆã—ã¦ãŠã‚Šã€ã™ã¹ã¦å‹•ä½œç¢ºèªå¯èƒ½ã§ã™ã€‚

https://github.com/YasushiKobayashi/samples/pull/880
