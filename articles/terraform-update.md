---
title: 0.11ç³»ã®Terraformã‚’1ç³»ã¾ã§updateã™ã‚‹ãŸã‚ã«ã‚„ã£ãŸã“ã¨
emoji: 'ğŸ“š'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['Terraform']
published: true
---

Terraform ã‚’ 0.11 ç³»ã§å‹•ã„ã¦ã„ãŸã‚‚ã®ã‚’ã€ä¸€æ°—ã« Terraform1 ç³»ã¾ã§ä¸€æ°—ã« update ã—ã¾ã—ãŸã€‚

ã¾ã  0.11 ç³»ã‚’ä½¿ã£ã¦ã„ã‚‹äººã¯ã‚ã¾ã‚Šã„ãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ã®ã§ã€ã“ã®è¨˜äº‹ã®ãƒ‹ãƒ¼ã‚ºãŒã‚ã‚‹ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ãŒã€ãƒãƒã‚Šã©ã“ã‚ã‚’ã¾ã¨ã‚ã¦ã„ãã¾ã™ã€‚

## å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå‹•ã‹ãªã„ã®ã§ã€ä¸Šã’ãªã„ã¨èº«å‹•ããŒã¨ã‚Œãªããªã£ãŸ

ã¾ãšã€ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’ã‚ˆã†ã‚„ãè¡Œã†ã“ã¨ã«ã—ãŸç†ç”±ã¯ä¸‹è¨˜ã§ã€é‹ç”¨ãŒ 0.11 ç³»ã§ã¯ã™ã§ã«ã§ããªããªã£ã¦ã„ãŸã®ã§ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’è¡Œã„ã¾ã—ãŸã€‚

- 0.11 ç³»ã§`terrafrom init` ãŒãªãœã‹ã§ããªã„ã€apply ãŒçµ¶å¯¾ã§ããªã„
- 0.11 ç³»ã ã¨ lambda ã§ node14 ãŒä½¿ãˆãªã„ã®ã§æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ãˆãªã„
- 1 ç³»ãŒã§ãŸã®ã§ã€ãã‚ãã‚ä¸Šã’ãŸã‹ã£ãŸ

## ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã«ã‚„ã£ãŸã“ã¨

### 0.13ç³»ã§applyã‚’ã—ã¦ã€stateã‚’æ›´æ–°ã™ã‚‹

> This guide focuses on changes from v0.13 to v0.14. Terraform supports upgrade tools and features only for one major release upgrade at a time, so if you are currently using a version of Terraform prior to v0.13 please upgrade through the latest minor releases of all of the intermediate versions first, reviewing the previous upgrade guides for any considerations that may be relevant to you.

https://developer.hashicorp.com/terraform/language/upgrade-guides/0-14

ä¸Šè¨˜ã®ã‚ˆã†ã«ã€0.14 ç³»ã‚ˆã‚Šæ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® Terraform ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€0.13 ç³»ã‚’çµŒç”±ã—ã¦ apply ã‚’ã—ã¦ state ã®çŠ¶æ…‹ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã®ãŸã‚ã€ä¸€æ°—ã« 1 ç³»ã«ä¸Šã’ã‚‹ã“ã¨ã¯ã§ããšã€å°åˆ»ã¿ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’é€²ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€output ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã¾ãš 0.12 ç³»ã§ apply ã‚’ã—ã¦ã€state ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### workspaceæ¯ã«applyã—ã¦stateã‚’æ›´æ–°ã™ã‚‹

workspace ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆã¯ã€workspace æ¯ã« state ã‚’ç®¡ç†ã—ã¦ã„ã‚‹ã®ã§ã‚‚ã¡ã‚ã‚“ã€workspace æ¯ã« apply ã—ã¦ state ã‚’æ›´æ–°ã™ã‚‹ãŒã‚ã‚Šã¾ã™ã€‚

ä¸Šè¨˜ã®æ‰‹é †ã‚’çµŒã¦ã€0.13 ç³»ã¾ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã§ãã‚Œã°ã€åŸºæœ¬çš„ã«ã¯ 1 ç³»ã¾ã§ç°¡å˜ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒã§ãã¾ã™ã€‚

## å„ç¨®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ€æ–°ã§applyã™ã‚‹

0.12 ç³»ã ã¨ 0.12.31 ãŒæœ€æ–°ã ãŒã€ã‚‚ã¨ã‚‚ã¨å…¥ã£ã¦ã„ãŸã®ãŒ 0.12.28 ã§ä¸‹è¨˜ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨é•ã†ã—ã€0.13.5 ã§ã‚‚ 1.0.5 ã§ã‚‚ã¾ã  apply ã—ã¦ãªã„ã®ã«ã“ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã¦ã¤ã¾ã‚Šã¾ã—ãŸã€‚

æœ€æ–°ã® 0.12.31 ã§ apply ã™ã‚‹ã“ã¨ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’é€²ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚

åŒæ§˜ã®å†…å®¹ã®ã‚¨ãƒ©ãƒ¼ã¯ 0.13 ç³»ã§ apply ã™ã‚‹ã¨ãã‚‚ç™ºç”Ÿã—ã¦ãŠã‚Šã€æœ€æ–°ã®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’é€²ã‚ãŸã»ã†ãŒã‚¹ãƒ ãƒ¼ã‚ºã«é€²ã‚ã‚‰ã‚Œã¾ã™ã€‚

```bash
Error: state snapshot was created by Terraform v1.0.5, which is newer than current v0.13.5; upgrade to
 Terraform v1.0.5 or greater to work with this state
```
